//!
//! \file       max14866.h
//! \author     Abdelrahman Ali
//! \date       2025-01-06
//!
//! \brief      max14866 spi bit banging.
//!

#ifndef MAX14866_H
#define MAX14866_H

//---------------------------------------------------------------------------
// INCLUDES
//---------------------------------------------------------------------------

#include <stdio.h>
#include <stdlib.h>
#include "pico/stdlib.h"
#include "hardware/pio.h"
#include "hardware/gpio.h"
#include "hardware/clocks.h"

//---------------------------------------------------------------------------
// CONSTANTS
//---------------------------------------------------------------------------

#define MAX14866_SPI_DIN 18
#define MAX14866_SPI_SCLK  19
#define MAX14866_SPI_LE   20
#define MAX14866_SPI_SET   21
#define MAX14866_SPI_CLR   28

#define MAX14866_CLK   2000000

//---------------------------------------------------------------------------
// MAX INIT FUNCTION
//---------------------------------------------------------------------------
void max14866_init();

//---------------------------------------------------------------------------
// MAX WRITE FUNCTION
//---------------------------------------------------------------------------
void max14866_write(uint16_t data);

//---------------------------------------------------------------------------
// MAX SET FUNCTION
//---------------------------------------------------------------------------
void max14866_set(const char *input);

//---------------------------------------------------------------------------
// MAX CLEAR FUNCTION
//---------------------------------------------------------------------------
void max14866_clear(const char *input);

//---------------------------------------------------------------------------
// MAX MAIN FUNCTION
//---------------------------------------------------------------------------
void max14866(const char *input);

//---------------------------------------------------------------------------
// END OF FILE
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// DAC CODE
//---------------------------------------------------------------------------

#define PIN_MOSI 15
#define PIN_CS 13
#define PIN_SCLK 14

//---------------------------------------------------------------------------
// DAC INIT FUNCTION
//---------------------------------------------------------------------------
void dac_init();

//---------------------------------------------------------------------------
// DAC DATA PRESENTAGE CALCULATION
//---------------------------------------------------------------------------
void dac_data_calculation(uint16_t *data, uint16_t input, uint16_t config_bits);

//---------------------------------------------------------------------------
// DAC WRITE FUNCTION
//---------------------------------------------------------------------------
void dac_write(uint16_t data);

//---------------------------------------------------------------------------
// DAC MAIN FUNCTION
void dac(const char *input);

//---------------------------------------------------------------------------
// END OF FILE
//---------------------------------------------------------------------------

#endif